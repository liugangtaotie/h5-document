---
title: 第二十章、自动化部署
author: liugang
date: 2021-02-05
tags:
 - tag4
categories:
 - category1
---

<Boxx  changeTime="5000"/>  

## 一. 背景

* 对应项目部署人员，需要每天进行日常打包（上班日每天下午5点开始打包，发布、部署）大约需要30分钟左右
* 这样浪费了大量时间去进行日常维护，若进行服务器自动打包部署，大约只需要5分钟左右时间，节约25分钟左右

## 二. 价值

* 以前xxx+xxx，需要2个人员维护，大约加起来需要60分钟
* 现在进行自动化部署，大约总共需要10分钟左右时间（节约50分钟）
* 这样只需要一个小伙伴即可维护好
* 从长远来看，非常有价值

## 三. 实践

* 半自动化部署：即为以前发布流程（部署人员 -> 本地生成dist-> git push -> jenkins生成docker镜像 -> rancher部署）
* 自动化部署：现在发布流程（部署人员->rancher部署）

### 3.1 example(半自动化部署)

* 部署人员 -> 本地生成dist: 对应项目,执行npm run build / make pro / make build, 把 dist 文件替换对应项目（dist）中的dist;

* git push: git push;

* jenkins生成docker镜像 -> rancher部署 : 

### 3.2 example(自动化部署)

* 部署人员 -> rancher部署: 只需要工作日每天9点前，去做一下升级就OK了

* 特别注意：如果要看如何做到自动化，可以查看对应 xx-xx-auto 项目中的 配置（config），就可以明白如何实现的，当然也可以咨询相关同学。      |

## 四. 快速食用

* 目前实现自动化部署案例：xxx（微信公众号、PC管理平台、公共mobile、公共web、xxx档案）
* 目前实现自动化部署案例：xxx（微信公众号、PC管理平台、公共mobile、公共web）

* 其中，以部署xxx微信公众号为例子：

* 1. 选择对应项目

* 2. 点击项目，进行升级

* 3. 点击如图按钮

* 4. docker镜像正在部署中

* 5. 部署成功后，点击对应的√


## 推荐的官方文档

